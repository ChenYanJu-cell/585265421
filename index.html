<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>æ€§åˆ¥å¹³æ¬Šå¢æ—å†’éšª</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: url('images/bg.jpg') no-repeat center center fixed;
    background-size: cover;
    color: white;
    text-align: center;
    margin: 0; padding: 0;
    overflow-x: hidden;
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .game-container {
    background: rgba(0,0,0,0.75);
    padding: 20px;
    border-radius: 20px;
    max-width: 800px;
    width: 90%;
    position: relative;
    display: flex;
    gap: 20px;
    align-items: center;
    z-index: 2;
  }
  .question-container {
    flex: 1;
    text-align: left;
  }
  h1, h2, p, .result, .score, .timer {
    background: rgba(255,255,255,0.1);
    border: 2px solid white;
    border-radius: 10px;
    padding: 10px;
    margin: 0 0 10px 0;
  }
  .score, .timer {
    font-weight: bold;
  }
  .swing-vine {
    width: 450px;
    animation: swing 2s ease-in-out infinite alternate;
    pointer-events: none;
    user-select: none;
  }
  .swing-vine img {
    width: 100%;
    display: block;
  }
  @keyframes swing {
    0% {transform: rotate(-5deg);}
    100% {transform: rotate(5deg);}
  }
  .answers button {
    display: block;
    width: 100%;
    max-width: 350px;
    margin: 10px 0;
    padding: 10px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background-color: #4caf50;
    color: white;
    transition: background-color 0.3s ease;
  }
  .answers button:hover {
    background-color: #45a049;
  }
  .human-run {
    position: fixed;
    bottom: 15vh;
    width: 600px;
    right: -600px;
    animation: humanRun 2s forwards;
    z-index: 9999;
    pointer-events: none;
    user-select: none;
  }
  @keyframes humanRun {
    0% { right: -600px; opacity: 1; }
    80% { right: calc(50vw - 300px); opacity: 1; }
    100% { opacity: 0; }
  }
  #introScreen {
    position: fixed;
    top:0; left:0; width:100vw; height:100vh;
    background: url('images/bg2.jpg') no-repeat center center fixed;
    background-size: cover;
    color: white;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 20px;
    box-sizing: border-box;
    z-index: 10000;
    text-align: center;
  }
  #introScreen p {
    background: rgba(0,0,0,0.6);
    border-radius: 15px;
    padding: 15px 30px;
    font-size: 22px;
    max-width: 600px;
    margin-bottom: 30px;
    line-height: 1.5;
  }
  #startBtn {
    font-size: 24px;
    padding: 10px 40px;
    background-color: #4caf50;
    border: none;
    border-radius: 15px;
    color: white;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.3s ease;
  }
  #startBtn:hover {
    background-color: #45a049;
  }
</style>
</head>
<body>

<div id="introScreen">
  <p>é™æ™‚8ç§’ï¼Œæ™‚é–“ä¸€ééŠæˆ²å°±çµæŸï¼Œä½ å°±è¢«é‡äººæ®ºæ­»äº†ã€‚</p>
  <button id="startBtn">é–‹å§‹éŠæˆ²</button>
</div>

<audio id="jungleSound" src="https://www.fesliyanstudios.com/play-mp3/4382" loop></audio>
<audio id="scarySound" src="https://www.fesliyanstudios.com/play-mp3/6685" preload="auto"></audio>
<audio id="tenseSound" src="https://www.fesliyanstudios.com/play-mp3/6544" preload="auto"></audio>

<div class="game-container" style="display:none;">
  <div class="swing-vine">
    <img src="images/green1.png" alt="è—¤æ¢" id="vineImg" />
  </div>
  <div class="question-container">
    <h1>å¢æ—å†’éšªï¼šæ€§åˆ¥å¹³æ¬Šä¹‹è·¯</h1>
    <div class="score" id="score">åˆ†æ•¸ï¼š0</div>
    <div class="timer" id="timer">å‰©é¤˜æ™‚é–“ï¼š8 ç§’</div>
    <div id="game"></div>
  </div>
</div>

<script>
const questions = [
  {question:"æ€§åˆ¥å¹³æ¬Šçš„æ„æ€æ˜¯ä»€éº¼ï¼Ÿ",options:["ç”·æ€§æ‡‰è©²æ¯”å¥³æ€§å¼·","å¥³æ€§æ¯”ç”·æ€§é‡è¦","æ‰€æœ‰æ€§åˆ¥éƒ½æ‡‰æœ‰å¹³ç­‰çš„æ¬Šåˆ©å’Œæ©Ÿæœƒ"],answer:2},
  {question:"ä»¥ä¸‹å“ªä¸€é …å±¬æ–¼æ€§åˆ¥æ­§è¦–ï¼Ÿ",options:["æ ¹æ“šèƒ½åŠ›é›‡ç”¨å“¡å·¥","å› æ€§åˆ¥è€Œä¸é›‡ç”¨æŸäºº","æä¾›æ‰€æœ‰äººåŒæ¨£çš„åŸ¹è¨“"],answer:1},
  {question:"èª°æœ‰æ¬Šé¸æ“‡è‡ªå·±çš„è·æ¥­ï¼Ÿ",options:["åªæœ‰ç”·æ€§","åªæœ‰å¥³æ€§","æ¯å€‹äºº"],answer:2},
  {question:"å­¸æ ¡è©²å¦‚ä½•æ¨å‹•æ€§åˆ¥å¹³ç­‰ï¼Ÿ",options:["å¼·èª¿ç”·ç”Ÿæ‡‰æ›´åŠªåŠ›","é¼“å‹µæ‰€æœ‰å­¸ç”Ÿè¡¨ç¾è‡ªå·±","åªèˆ‰è¾¦ç”·ç”Ÿæ¯”è³½"],answer:1},
  {question:"ä»¥ä¸‹å“ªä¸€é …ä¸æ˜¯æ€§åˆ¥å¹³æ¬Šçš„ä¸€éƒ¨åˆ†ï¼Ÿ",options:["ä¿ƒé€²å¥³æ€§åƒæ”¿","ç¦æ­¢ç”·æ€§ç…§é¡§å°å­©","å¹³ç­‰è–ªè³‡åˆ¶åº¦"],answer:1}
];
const vines = ["green1.png","green2.png","green3.png","green4.png","green5.png"];

let currentQuestion = 0;
let branchesPassed = 0;
let score = 0;
let vineIndex = 0;
let answeringAllowed = false;
let timeLeft = 8;
let timerInterval;

const gameDiv = document.getElementById("game");
const scoreDiv = document.getElementById("score");
const timerDiv = document.getElementById("timer");
const vineImg = document.getElementById("vineImg");
const jungleSound = document.getElementById("jungleSound");
const scarySound = document.getElementById("scarySound");
const tenseSound = document.getElementById("tenseSound");
const introScreen = document.getElementById("introScreen");
const startBtn = document.getElementById("startBtn");
const gameContainer = document.querySelector(".game-container");

startBtn.addEventListener("click", () => {
  introScreen.style.display = "none";
  gameContainer.style.display = "flex";
  jungleSound.play();
  nextQuestion();
});

function nextQuestion() {
  if (currentQuestion >= questions.length) {
    gameDiv.innerHTML = `
      <div class="result">ğŸ‰ æ­å–œä½ é€šéäº†æ‰€æœ‰åˆ†æ”¯ï¼<br>æœ€çµ‚åˆ†æ•¸ï¼š${score} åˆ†</div>
      <button onclick="goToNextLevel()">å‰å¾€ä¸‹ä¸€é—œ</button>
    `;
    timerDiv.textContent = "";
    vineImg.style.display = "none";
    tenseSound.pause();
    tenseSound.currentTime = 0;
    return;
  }

  timeLeft = 8;
  timerDiv.textContent = `å‰©é¤˜æ™‚é–“ï¼š${timeLeft} ç§’`;
  answeringAllowed = true;

  tenseSound.currentTime = 0;
  tenseSound.play();

  timerInterval = setInterval(() => {
    timeLeft--;
    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      answeringAllowed = false;
      tenseSound.pause();
      tenseSound.currentTime = 0;
      showHumanRun();
      gameOver("æ™‚é–“åˆ°ï¼é‡äººè¿½ä¸Šä½ äº†ï¼Œä½ è¢«æ®ºæ­»äº†ï¼");
    } else {
      timerDiv.textContent = `å‰©é¤˜æ™‚é–“ï¼š${timeLeft} ç§’`;
    }
  }, 1000);

  const q = questions[currentQuestion];
  gameDiv.innerHTML = `
    <div class="question">
      <h2>å•é¡Œ ${currentQuestion + 1}ï¼š</h2>
      <p>${q.question}</p>
    </div>
    <div class="answers">
      ${q.options.map((opt, i) => `<button onclick="checkAnswer(${i})">${opt}</button>`).join('')}
    </div>
  `;

  vineImg.src = `images/${vines[vineIndex]}`;
  vineImg.style.display = "block";
  answeringAllowed = true;
}

function checkAnswer(selected) {
  if (!answeringAllowed) return;
  clearInterval(timerInterval);
  tenseSound.pause();
  tenseSound.currentTime = 0;
  answeringAllowed = false;

  const correct = questions[currentQuestion].answer;

  if (selected === correct) {
    branchesPassed++;
    score += 10;
    updateScore();
    vineIndex = (vineIndex + 1) % vines.length;
    gameDiv.innerHTML = `<div class="result">ç­”å°äº†ï¼ä½ å®‰å…¨é€šéäº†ä¸€å€‹åˆ†æ”¯ ğŸŒ¿</div>
    <button onclick="advance()">ç¹¼çºŒå‰é€²</button>`;
  } else {
    showHumanRun();
    gameOver("ç­”éŒ¯äº†ï¼é‡äººè¿½ä¸Šä½ äº†ï¼Œä½ è¢«æ®ºæ­»äº†ï¼");
  }
}

function advance() {
  currentQuestion++;
  nextQuestion();
}

function updateScore() {
  scoreDiv.textContent = `åˆ†æ•¸ï¼š${score}`;
}

function gameOver(message) {
  gameDiv.innerHTML = `
    <div class="result">${message}</div>
    <button onclick="restartGame()">é‡æ–°æŒ‘æˆ°</button>
  `;
  timerDiv.textContent = "";
  vineImg.style.display = "none";
}

function restartGame() {
  currentQuestion = 0;
  branchesPassed = 0;
  score = 0;
  vineIndex = 0;
  updateScore();
  nextQuestion();
}

function goToNextLevel() {
  window.location.href = "level2.html";
}

function showHumanRun() {
  scarySound.currentTime = 0;
  scarySound.play();
  const human = document.createElement("img");
  human.src = "images/human2.png";
  human.className = "human-run";
  document.body.appendChild(human);
  human.addEventListener("animationend", () => {
    human.remove();
  });
}
</script>

</body>
</html>

