<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>æ€§åˆ¥å¹³æ¬Šå»šæˆ¿éŠæˆ²</title>
  <style>
    body, html {
      margin: 0; padding: 0;
      font-family: 'Microsoft JhengHei', sans-serif;
      height: 100vh; width: 100vw;
      background: url('images/shopping.png') no-repeat center center/cover;
      color: white;
      overflow: hidden;
    }
    .screen {
      position: absolute;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 30px;
      backdrop-filter: blur(4px);
      background-color: rgba(0,0,0,0.6);
    }
    #start-screen { display: flex; }
    .btn {
      background-color: #ff69b4;
      border: none;
      padding: 12px 24px;
      font-size: 20px;
      border-radius: 10px;
      color: white;
      cursor: pointer;
      margin-top: 20px;
      transition: background-color 0.3s;
      text-decoration: none;
      display: inline-block;
    }
    .btn:hover { background-color: #ff1493; }
    #game-container {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: start;
      padding-top: 40px;
      height: 100vh;
      box-sizing: border-box;
    }
    #question-area {
      background-color: rgba(0,0,0,0.6);
      border-radius: 12px;
      padding: 20px 30px;
      width: 85%;
      max-width: 700px;
    }
    #question {
      font-size: 24px;
      margin-bottom: 20px;
      min-height: 60px;
    }
    #answers {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
    }
    .answer-btn {
      flex: 1 1 45%;
      min-width: 140px;
      padding: 12px 10px;
      font-size: 18px;
      border-radius: 10px;
      border: none;
      background-color: #ff69b4;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .answer-btn:hover { background-color: #ff1493; }
    #money {
      margin-top: 12px;
      font-size: 20px;
    }
    #shop {
      margin-top: 30px;
      display: flex;
      justify-content: center;
      gap: 30px;
      flex-wrap: wrap;
      max-width: 800px;
      width: 90%;
    }
    .item {
      background: rgba(255,255,255,0.1);
      border: 2px solid white;
      border-radius: 12px;
      padding: 12px;
      width: 130px;
      text-align: center;
      color: white;
      user-select: none;
      transition: opacity 0.3s;
    }
    .item img {
      width: 90px;
      height: 90px;
      object-fit: contain;
      pointer-events: none;
    }
    .item button {
      margin-top: 8px;
      padding: 6px 10px;
      background-color: #4CAF50;
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s;
    }
    .item button:disabled {
      background-color: grey;
      cursor: not-allowed;
    }
    .item button:hover:not(:disabled) {
      background-color: #388E3C;
    }
    #cook-screen {
      display: none;
      background: url('images/tai.jpg') no-repeat center center/cover;
      background-size: cover;
      color: black;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 20px;
      height: 100vh;
      position: relative;
    }
    #steak {
      width: 440px;
      margin-top: 30px;
      border-radius: 12px;
      box-shadow: 0 0 15px #cc3300;
      display: none;
    }
    #chef-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 750px;
      height: 750px;
      pointer-events: none;
      z-index: 10;
    }
    #chef-container img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    #result-message {
      margin-top: 20px;
      font-size: 24px;
      color: #ff5555;
      font-weight: bold;
      min-height: 40px;
    }
  </style>
</head>
<body>

  <div id="start-screen" class="screen">
    <h1>æ€§åˆ¥å¹³æ¬Šå»šæˆ¿</h1>
    <p>
      æ­¡è¿ä¾†åˆ°æ€§åˆ¥å¹³æ¬Šå»šæˆ¿ï¼<br />
      è«‹é€éå›ç­”æœ‰æŒ‘æˆ°æ€§çš„æ€§åˆ¥å¹³æ¬Šé¡Œç›®ï¼Œè³ºå–é‡‘å¹£è³¼è²·åšç‰›æ’æ‰€éœ€çš„é£Ÿæã€‚<br />
      æº–å‚™å¥½äº†å—ï¼Ÿ
    </p>
    <button class="btn" onclick="startGame()">é–‹å§‹éŠæˆ²</button>
  </div>

  <div id="game-container" class="screen">
    <div id="question-area">
      <div id="question">è¼‰å…¥ä¸­...</div>
      <div id="answers"></div>
      <div id="result-message"></div>
      <div id="money">é‡‘å¹£ï¼š0</div>
    </div>

    <div id="shop">
      <div class="item" data-name="beef" data-price="10">
        <img src="images/beef.png" alt="ç‰›æ’" />
        <div>ç‰›æ’ $10</div>
        <button>è³¼è²·</button>
      </div>
      <div class="item" data-name="salt" data-price="4">
        <img src="images/salt.png" alt="é¹½" />
        <div>é¹½ $4</div>
        <button>è³¼è²·</button>
      </div>
      <div class="item" data-name="pepper" data-price="5">
        <img src="images/pepper.png" alt="èƒ¡æ¤’" />
        <div>èƒ¡æ¤’ $5</div>
        <button>è³¼è²·</button>
      </div>
      <div class="item" data-name="butter" data-price="6">
        <img src="images/butter.png" alt="å¥¶æ²¹" />
        <div>å¥¶æ²¹ $6</div>
        <button>è³¼è²·</button>
      </div>
      <div class="item" data-name="herbs" data-price="3">
        <img src="images/herbs.png" alt="é¦™è‰" />
        <div>é¦™è‰ $3</div>
        <button>è³¼è²·</button>
      </div>
    </div>
  </div>

  <div id="cook-screen" class="screen">
    <div id="cooking-text" style="background: rgba(255,255,255,0.8); padding: 20px; border-radius: 15px; max-width: 400px; margin: auto; font-size: 24px;">
      å»šå¸«æ­£åœ¨ç…ç‰›æ’ä¸­ğŸ½ï¸...
    </div>
    <img id="steak" src="" alt="ç†Ÿç‰›æ’" />
    <div id="done-text" style="margin-top: 30px; font-size: 28px; font-weight: bold; color: #cc3300; display: none;">
      æ­å–œä½ æˆåŠŸåšå‡ºç‰›æ’ï¼
    </div>
    
    <!-- å›ç¬¬ä¸€é—œæŒ‰éˆ• -->
    <a id="back-to-index-btn" class="btn" style="display:none; margin-top:40px;" href="index.html">å›ç¬¬ä¸€é—œ</a>

    <!-- å†ç©ä¸€æ¬¡æŒ‰éˆ• -->
    <a id="play-again-btn" class="btn" style="display:none; margin-top:20px;" href="level4.html">å†ç©ä¸€æ¬¡</a>
  </div>

  <div id="chef-container">
    <img src="images/chef.png" alt="å»šå¸«" />
  </div>

<script>
  const questions = [
    {
      q: "ä¸‹åˆ—å“ªä¸€é …æ˜¯æ­£ç¢ºçš„æ€§åˆ¥å¹³ç­‰è§€å¿µï¼Ÿ",
      a: ["å¥³æ€§å’Œç”·æ€§éƒ½èƒ½å‹ä»»å„ç¨®è·æ¥­", "å¥³æ€§æ‡‰è©²ä¸»è¦è² è²¬å®¶å‹™", "ç”·æ€§æ¯”å¥³æ€§æ›´é©åˆé ˜å°"],
      c: 0
    },
    {
      q: "æ¨å‹•æ€§åˆ¥å¹³æ¬Šçš„é‡è¦åŸå› ç‚ºä½•ï¼Ÿ",
      a: ["ä¿ƒé€²ç¤¾æœƒå…¬å¹³èˆ‡å°Šé‡å¤šå…ƒ", "ç¶­æŒå‚³çµ±å®¶åº­è§’è‰²åˆ†å·¥", "è®“æŸæ€§åˆ¥äº«æœ‰ç‰¹æ¬Š"],
      c: 0
    },
    {
      q: "ã€Œæ€§åˆ¥åˆ»æ¿å°è±¡ã€æ˜¯æŒ‡ï¼Ÿ",
      a: ["å°ç”·å¥³ç‰¹å®šè§’è‰²çš„å›ºå®šèªçŸ¥", "æ¯å€‹äººéƒ½æ˜¯ç¨ç‰¹å€‹é«”", "é¼“å‹µå¤šå…ƒå¹³ç­‰è§€å¿µ"],
      c: 0
    },
    {
      q: "å¦‚æœç”·ç”Ÿæƒ³ç•¶å¹¼æ•™è€å¸«ï¼Œæ­£ç¢ºçš„æ…‹åº¦æ˜¯ï¼Ÿ",
      a: ["é¼“å‹µä»–è¿½æ±‚å¤¢æƒ³", "è¦ºå¾—å¾ˆå¥‡æ€ª", "èªç‚ºå¹¼æ•™åªé©åˆå¥³ç”Ÿ"],
      c: 0
    },
    {
      q: "ä¸‹åˆ—å“ªç¨®è¡Œç‚ºæ˜¯æ€§åˆ¥æ­§è¦–ï¼Ÿ",
      a: ["å…¬å¸åªè˜ç”¨ç”·æ€§ä¸»ç®¡", "ä¾èƒ½åŠ›éŒ„ç”¨å“¡å·¥", "å°Šé‡æ¯ä½å“¡å·¥çš„é¸æ“‡"],
      c: 0
    }
  ];

  let currentQ = 0;
  let coins = 0;
  let owned = {};
  let timer = null;
  const TIME_LIMIT = 8;

  const questionEl = document.getElementById("question");
  const answersEl = document.getElementById("answers");
  const moneyEl = document.getElementById("money");
  const resultMsgEl = document.getElementById("result-message");
  const items = document.querySelectorAll(".item");
  const gameContainer = document.getElementById("game-container");
  const cookScreen = document.getElementById("cook-screen");
  const playAgainBtn = document.getElementById("play-again-btn");
  const backToIndexBtn = document.getElementById("back-to-index-btn");

  function startGame() {
    document.getElementById('start-screen').style.display = 'none';
    gameContainer.style.display = 'flex';
    cookScreen.style.display = 'none';
    currentQ = 0;
    coins = 0;
    owned = {};
    moneyEl.textContent = `é‡‘å¹£ï¼š${coins}`;
    resultMsgEl.textContent = "";
    resetShop();
    loadQuestion();
  }

  function loadQuestion() {
    clearTimeout(timer);
    resultMsgEl.textContent = "";
    if (currentQ >= questions.length) {
      questionEl.textContent = "ä½ å·²å®Œæˆæ‰€æœ‰é¡Œç›®ï¼Œå¯ä»¥é–‹å§‹è³¼è²·é£Ÿæå›‰ï¼";
      answersEl.innerHTML = "";
      return;
    }

    const q = questions[currentQ];
    questionEl.textContent = q.q;
    answersEl.innerHTML = "";

    q.a.forEach((option, idx) => {
      const btn = document.createElement("button");
      btn.className = "answer-btn";
      btn.textContent = option;
      btn.onclick = () => checkAnswer(idx === q.c);
      answersEl.appendChild(btn);
    });

    timer = setTimeout(() => {
      failGame("æ™‚é–“åˆ°ï¼ç­”é¡Œå¤±æ•—ï¼Œè«‹é‡æ–°é—–é—œ");
    }, TIME_LIMIT * 1000);
  }

  function checkAnswer(isCorrect) {
    clearTimeout(timer);
    if (isCorrect) {
      coins += 10;
      moneyEl.textContent = `é‡‘å¹£ï¼š${coins}`;
      currentQ++;
      loadQuestion();
    } else {
      failGame("ç­”éŒ¯äº†ï¼è«‹é‡æ–°é—–é—œ");
    }
  }

  function failGame(msg) {
    clearTimeout(timer);
    resultMsgEl.textContent = msg;
    answersEl.innerHTML = "";
    questionEl.textContent = "";
    const retryBtn = document.createElement("button");
    retryBtn.className = "btn";
    retryBtn.textContent = "é‡æ–°é—–é—œ";
    retryBtn.onclick = () => {
      retryBtn.remove();
      startGame();
    };
    answersEl.appendChild(retryBtn);
  }

  items.forEach(item => {
    const btn = item.querySelector("button");
    const name = item.dataset.name;
    const price = parseInt(item.dataset.price);

    btn.onclick = () => {
      if (coins >= price) {
        coins -= price;
        moneyEl.textContent = `é‡‘å¹£ï¼š${coins}`;
        owned[name] = true;
        item.style.opacity = "0.5";
        btn.disabled = true;
        checkCook();
      } else {
        alert("é‡‘å¹£ä¸è¶³ï¼");
      }
    };
  });

  function resetShop() {
    items.forEach(item => {
      item.style.opacity = "1";
      const btn = item.querySelector("button");
      btn.disabled = false;
    });
  }

  function checkCook() {
    const required = ["beef", "salt", "pepper", "butter", "herbs"];
    const allHave = required.every(i => owned[i]);
    if (allHave) {
      gameContainer.style.display = "none";
      cookScreen.style.display = "flex";

      const cookingText = document.getElementById("cooking-text");
      const doneText = document.getElementById("done-text");
      const steakImg = document.getElementById("steak");

      cookingText.style.display = "block";
      doneText.style.display = "none";
      steakImg.style.display = "none";
      steakImg.src = "";

      playAgainBtn.style.display = "none";
      backToIndexBtn.style.display = "none";

      setTimeout(() => {
        cookingText.style.display = "none";
        steakImg.src = "images/steak.png";
        steakImg.style.display = "block";
        doneText.style.display = "block";
        playAgainBtn.style.display = "inline-block";
        backToIndexBtn.style.display = "inline-block"; // é¡¯ç¤ºå›ç¬¬ä¸€é—œæŒ‰éˆ•
      }, 5000);
    }
  }

</script>

</body>
</html>
